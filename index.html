<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>篠ノ井乗務区 - 2周年特設サイト</title>
<style>
:root { --bg: #fcfaf2; --red: #d32f2f; --font: "BIZ UDPGothic", sans-serif; }
body { background: var(--bg); font-family: var(--font); text-align: center; margin: 0; padding: 20px; }
.btn-group { display: flex; flex-direction: column; gap: 15px; max-width: 450px; margin: 20px auto; }
.main-btn { display: block; padding: 25px; background: var(--red); color: #fff; text-decoration: none; border-radius: 50px; font-weight: bold; font-size: 1.2rem; border: none; cursor: pointer; transition: 0.3s; }
.main-btn:disabled { background: #ccc !important; cursor: not-allowed; opacity: 0.7; }
.kids-btn { background: #ff9800; font-size: 1.8rem; padding: 40px; }
.parent-lock { margin-top: 30px; padding: 15px; border: 1px dashed #999; border-radius: 10px; font-size: 0.9rem; }
.hidden { display: none !important; }
footer { margin-top: 50px; border-top: 1px solid #ccc; padding-top: 20px; font-size: 0.8rem; }
</style>
</head>
<body>

<div id="normal-menu">
    <div style="background:#fff5f5; padding:20px; border:2px solid var(--red); border-radius:15px; margin-bottom:20px;">
        <h2 style="color:var(--red); margin:0;">2026年 謹賀新年</h2>
        <p>1月1日 0時より おみくじ公開中！</p>
    </div>

    <div class="btn-group">
        <button id="rail-kuji" class="main-btn" onclick="location.href='rail_result.html'" disabled>【点検中】鉄道おみくじ</button>
        <button id="norm-kuji" class="main-btn" onclick="location.href='norm_result.html'" disabled style="background:#b71c1c;">【準備中】一般おみくじ</button>
        <a href="kids.html" class="main-btn kids-btn">たのしいキッズサイト</a>
        <a href="about.html" class="main-btn" style="background:#666;">サイトの使い方</a>
        <a href="policy.html" class="main-btn" style="background:#444;">運営のきまり（10条）</a>
    </div>

    <div class="parent-lock">
        <p>保護者設定：お子様に渡す前にボタンを押してください</p>
        <button onclick="lockKidsMode()">キッズ固定モードを有効にする</button>
    </div>
</div>

<div id="locked-menu" class="hidden">
    <h1 style="font-size:3rem; color:#ff9800;">キッズ専用モード</h1>
    <div class="btn-group">
        <a href="kids.html" class="main-btn kids-btn">あそびにいく！</a>
        <button id="k-rail-kuji" class="main-btn" onclick="location.href='rail_result.html'" disabled>おみくじ</button>
    </div>
    <button onclick="unlockKidsMode()" style="margin-top:100px; background:none; border:none; color:#ccc;">解除（保護者用）</button>
</div>

<footer>
    製造元：GitHub / 制作・著作：篠ノ井乗務区<br>
    ※5分ごとに自動で最新情報に更新されます
</footer>

<script>
// おみくじ公開判定（全ページ共通・2026年元旦）
const start = new Date("2026/01/01 00:00:00");
function updateButtons() {
    const isReady = new Date() >= start;
    const ids = ['rail-kuji', 'norm-kuji', 'k-rail-kuji'];
    ids.forEach(id => {
        const btn = document.getElementById(id);
        if(btn) {
            btn.disabled = !isReady;
            if(isReady) btn.innerText = btn.innerText.replace(/【.*】/, "運勢点検！");
        }
    });
}
setInterval(updateButtons, 1000); updateButtons();

// キッズ固定モードの処理
function lockKidsMode() {
    const pass = prompt("解除用のパスワード（数字4ケタ）を決めて入力してください");
    if(pass) {
        localStorage.setItem('kids_lock_pass', pass);
        localStorage.setItem('kids_lock_active', 'true');
        applyLock();
    }
}
function unlockKidsMode() {
    const pass = prompt("パスワードを入力してください");
    if(pass === localStorage.getItem('kids_lock_pass')) {
        localStorage.setItem('kids_lock_active', 'false');
        applyLock();
    } else { alert("ちがうよ！"); }
}
function applyLock() {
    const active = localStorage.getItem('kids_lock_active') === 'true';
    document.getElementById('normal-menu').classList.toggle('hidden', active);
    document.getElementById('locked-menu').classList.toggle('hidden', !active);
}
applyLock();

// 5分更新
setTimeout(() => location.reload(), 300000);
</script>
</body>
</html>
