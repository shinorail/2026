<!DOCTYPE html>
<html lang="ja">
<head>
    <link rel="icon" href="favicon.ico">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>運勢点検結果 - 篠ノ井乗務区</title>
<style>
@keyframes zoomIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
body { background: #fcfaf2; color: #333; font-family: "serif"; text-align: center; padding: 20px; }
.result-card { border: 3px solid #d32f2f; padding: 30px; max-width: 450px; margin: 20px auto; background: #fff; animation: zoomIn 0.5s ease-out; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
.lang-switcher { margin-bottom: 20px; display: flex; justify-content: center; gap: 5px; }
.lang-switcher button { background: #eee; border: 1px solid #ccc; padding: 5px 10px; cursor: pointer; font-size: 11px; border-radius: 3px; }
.lang-switcher button.active { background: #004d40; color: white; }
h2 { font-size: 1em; color: #666; margin: 0; }
h1 { font-size: 3em; margin: 10px 0; color: #d32f2f; border-bottom: 4px solid #d32f2f; display: inline-block; padding: 0 15px; }
.msg { text-align: left; line-height: 1.8; margin: 20px 0; font-size: 0.95em; background: #fffaf0; padding: 15px; border-radius: 5px; min-height: 100px; color: #1a1a1a; white-space: pre-wrap; }
.btn-group { display: flex; flex-direction: column; gap: 10px; }
.menu-btn { display: flex; align-items: center; justify-content: center; padding: 12px; text-decoration: none; font-weight: bold; border-radius: 4px; color: #fff; transition: 0.3s; font-size: 0.9em; }
.share-x { background: #000; }
.share-line { background: #06C755; }
.share-copy { background: #607D8B; }
.back-btn { background: #004d40; margin-top: 10px; }
.menu-btn:hover { opacity: 0.8; }
</style>
</head>
<body>
<div class="result-card">
    <div class="lang-switcher">
        <button onclick="changeLang('ja')" id="btn-ja" class="active">日本語</button>
        <button onclick="changeLang('en')" id="btn-en">English</button>
    </div>
    <h2 id="ui-subtitle">運勢点検の結果…</h2>
    <h1 id="rank"></h1>
    <div id="msg" class="msg"></div>
    
    <div class="btn-group">
        <a id="share-x" class="menu-btn share-x" target="_blank">X (Twitter) でシェア</a>
        <a id="share-line" class="menu-btn share-line" target="_blank">LINE で送る</a>
        <button onclick="copyResult()" id="ui-copy" class="menu-btn share-copy">結果をコピー (Insta等へ)</button>
        <a href="index.html" id="ui-back" class="menu-btn back-btn">会場入口へ戻る</a>
    </div>
</div>

<script>
const results = [
    { rank: { ja: "超特急", en: "Super Exp." }, msg: { ja: "【全体】オールグリーン！最高速度で突き進めます。\n【心得】前方よし！定時運行で大きな福が来ます。", en: "All green! You can go at maximum speed.\nTip: Stay focused and success will arrive on time." } },
    { rank: { ja: "特急", en: "Limited Exp." }, msg: { ja: "【全体】出力良好。急勾配も力強く登り切れます。\n【心得】車窓の景色を楽しむ余裕が運気を上げます。", en: "Good power output. You can climb steep slopes easily.\nTip: Enjoying the view will boost your luck." } },
    { rank: { ja: "快速", en: "Rapid" }, msg: { ja: "【全体】軽快な走り。主要な目標を次々と通過できます。\n【心得】停車駅（休息）を忘れずに。安定走行が吉。", en: "Smooth running. You will pass your goals one by one.\nTip: Don't forget to stop and rest for stability." } },
    { rank: { ja: "各停", en: "Local" }, msg: { ja: "【全体】一駅ずつ着実に。丁寧な歩みが実を結びます。\n【心得】指差し呼称で安全確認を。一歩ずつが吉。", en: "Steady progress station by station. Honesty is key.\nTip: Check everything twice. Step by step is best." } },
    { rank: { ja: "回送", en: "Out of Svc." }, msg: { ja: "【全体】次なる運行への準備期間。無理は禁物です。\n【心得】車両点検（休息）を優先。エネルギーを充電して。", en: "Preparation period for the next run. Don't overwork.\nTip: Prioritize maintenance and recharge your energy." } },
    { rank: { ja: "臨時", en: "Special" }, msg: { ja: "【全体】思いがけない幸運な出会いや出来事があるかも。\n【心得】柔軟なダイヤ改正が吉。変化を楽しんで。", en: "Unexpected lucky encounters or events may occur.\nTip: Be flexible with your schedule and enjoy changes." } }
];

let currentLang = 'ja';
let currentRes = results[Math.floor(Math.random() * results.length)];

function changeLang(l) {
    currentLang = l;
    document.querySelectorAll('.lang-switcher button').forEach(b => b.classList.remove('active'));
    document.getElementById('btn-' + l).classList.add('active');
    render();
}

function render() {
    const r = currentRes;
    const l = currentLang;
    document.getElementById('rank').innerText = r.rank[l];
    document.getElementById('msg').innerText = r.msg[l];
    
    const ui = {
        ja: { sub: "運勢点検の結果…", back: "会場入口へ戻る", copy: "結果をコピー (Insta等へ)", copied: "コピーしました！" },
        en: { sub: "Inspection Result...", back: "Back to Home", copy: "Copy Result (for Insta etc.)", copied: "Copied!" }
    };
    
    document.getElementById('ui-subtitle').innerText = ui[l].sub;
    document.getElementById('ui-back').innerText = ui[l].back;
    document.getElementById('ui-copy').innerText = ui[l].copy;

    const shareText = `篠ノ井乗務区 運勢点検：【${r.rank[l]}】\n${r.msg[l]}\n#篠ノ井乗務区 #鉄道みくじ`;
    const shareUrl = window.location.href.split('result.html')[0] + 'index.html';

    // X
    document.getElementById('share-x').href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
    // LINE
    document.getElementById('share-line').href = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(shareUrl)}&text=${encodeURIComponent(shareText)}`;
}

function copyResult() {
    const r = currentRes;
    const l = currentLang;
    const shareUrl = window.location.href.split('result.html')[0] + 'index.html';
    const fullText = `篠ノ井乗務区 運勢点検：【${r.rank[l]}】\n${r.msg[l]}\n${shareUrl}\n#篠ノ井乗務区`;
    
    navigator.clipboard.writeText(fullText).then(() => {
        const btn = document.getElementById('ui-copy');
        const originalText = btn.innerText;
        btn.innerText = currentLang === 'ja' ? "コピー完了！" : "Copied!";
        setTimeout(() => btn.innerText = originalText, 2000);
    });
}

render();
</script>
</body>
</html>
