<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒ©ãƒ³ã‚­ãƒ³ã‚° - ç¯ ãƒäº•ä¹—å‹™åŒº</title>
<style>
:root { --main: #1a237e; --bg: #f4f4f2; --gold: #c5a059; }
body { background: var(--bg); font-family: "BIZ UDPGothic", sans-serif; text-align: center; padding: 20px; color: #333; }
h1 { color: var(--main); border-bottom: 3px solid var(--gold); display: inline-block; padding: 0 20px 10px; }

.ranking-list { max-width: 450px; margin: 20px auto; background: #fff; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); overflow: hidden; }
.rank-item { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #eee; }
.rank-num { width: 40px; font-weight: bold; font-size: 1.2rem; }
.rank-icon { font-size: 1.5rem; margin: 0 15px; }
.rank-name { flex: 1; text-align: left; font-weight: bold; }
.rank-score { font-weight: bold; color: var(--main); }

.loading { padding: 40px; color: #888; }
.nav-btns { display: flex; gap: 10px; max-width: 450px; margin: 20px auto; }
.btn-nav { flex: 1; padding: 15px; border-radius: 8px; text-decoration: none; font-weight: bold; color: #fff; }
</style>
</head>
<body>

<h1>ğŸ† æ­´ä»£TOP10</h1>

<div class="ranking-list" id="ranking-list">
    <div class="loading">æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
</div>

<div class="nav-btns">
    <a href="kids.html" class="btn-nav" style="background: var(--main);">ã‚²ãƒ¼ãƒ ã«ã‚‚ã©ã‚‹</a>
    <a href="index.html" class="btn-nav" style="background: #666;">ãƒˆãƒƒãƒ—ã«ã‚‚ã©ã‚‹</a>
</div>

<script>
// ã“ã“ã‚’ã‚ãªãŸã®æœ€æ–°ã®URLã«æ›¸ãæ›ãˆã¦ãã ã•ã„
const gasUrl = "https://script.google.com/macros/s/AKfycbw1Wmit3zAGi1sYBr-F_a8JnEjepmtZL9CJATnOxSdNp0Uz4UTuKu1kgFK6WmdWQ1US/exec";

async function loadRanking() {
    try {
        const response = await fetch(gasUrl);
        if (!response.ok) throw new Error();
        const data = await response.json();
        const list = document.getElementById("ranking-list");
        list.innerHTML = "";

        if (data.length === 0) {
            list.innerHTML = "<div class='loading'>ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>";
            return;
        }

        data.forEach((item, index) => {
            const row = document.createElement("div");
            row.className = "rank-item";
            row.innerHTML = `
                <div class="rank-num">${index + 1}</div>
                <div class="rank-icon">${item.icon || 'ğŸ'}</div>
                <div class="rank-name">${item.nickname}</div>
                <div class="rank-score">${item.score}ç‚¹</div>
            `;
            list.appendChild(row);
        });
    } catch (e) {
        document.getElementById("ranking-list").innerHTML = "<div class='loading'>ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚<br>GASã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</div>";
    }
}
loadRanking();
</script>
</body>
</html>
